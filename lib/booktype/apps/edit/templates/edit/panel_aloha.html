{% load i18n booktype_tags %}

<div class="template templateAlohaToolbar">
   {% include "edit/aloha_menu.html" %}
   {% include "edit/aloha_toolbar.html" %}
</div>

<div class="template templateAlohaContent">
  <div id="contenteditor" class="" dir="{{ book_dir}}" lang="{{ book_language }}"></div>
</div>

<script type="text/html" id="templateAlohaFull">
   <a href="#" class="zenBtn" id="zen" data-original-title="{% trans 'Zen mode' %}" rel="tooltip" data-placement="left"><i class="icon-double-angle-up"></i></a>
</script>

<div id="find-replace" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
       <div class="modal-content">
         <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
           {% trans "Find &amp; Replace" %}
         </div>
         <div class="modal-body">
           <div class="form-group">
             <input type="text" class="form-control" name="find" placeholder="{% trans "Find" %}">
           </div>
           <div class="form-group">
             <input type="text" class="form-control" name="replace" placeholder="{% trans "Replace" %}">
           </div>
           <div class="checkbox"><label><input type="checkbox" name="match-case">{% trans "Match Case" %}</label></div>
           <span class="msg-report hide" style="color: green">{% trans "Finished" %}</span>
         </div>
         <div class="modal-footer">
           <button class="btn btn-default pull-left cancel-button operation-findandreplace" aria-hidden="true">{% trans "Cancel" %}</button>

           <button class="btn btn-default replace-button operation-findandreplace" aria-hidden="true">{% trans "Replace" %}</button>
           <button class="btn btn-default replace-all-button operation-findandreplace" aria-hidden="true">{% trans "Replace All" %}</button>
           <button class="btn btn-default prev-button operation-findandreplace" aria-hidden="true">{% trans "&lt; Prev" %}</button>
           <button class="btn btn-default next-button operation-findandreplace" aria-hidden="true">{% trans "Next $gt;" %}</button>
         </div>
       </div>
   </div>
 </div>

<div id="elCount" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3>{% trans "Word count" %}</h3>
        </div>
        <div class="modal-body">
            <b>{% trans "Whole book" %}</b><br/>
            {% trans "Book word count" %}: <span class="all_wcount">-</span><br/>
            {% trans "Book character count" %}: <span class="all_charcount">-</span><br/>
            {% trans "Book character count (with spaces)" %}: <span class="all_charspacecount">-</span><br/><br/>
            <b>{% trans "Chapter" %}</b><br>
            {% trans "Word count" %}: <span class="wcount">-</span><br/>
            {% trans "Character count" %}: <span class="charcount">-</span><br/>
            {% trans "Character count (with spaces)" %}: <span class="charspacecount">-</span>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">{% trans "OK" %}</button>
        </div>
      </div>
  </div>
</div>

<div id="newLink" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
 <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">{% trans "Link" %}</h3>
    </div>
    <div class="modal-body">
      <div class="form-group">
            <input type="text" class="form-control" name="url" placeholder="URL">
        </div>
      <div class="form-group">
            <input type="text" class="form-control" name="title" placeholder="Title">
      </div>
      <div class="linktochapter">
        <div class="linktochapter-header">
          <i class="icon-chevron-down toggle-close"></i>
          <i class="icon-chevron-right toggle-open"></i>
          <span class="linktochapter-title">Or link to existing chapter</span>
        </div>
        <div class="linktochapter-content">
          <ul>
          </ul>
        </div>
      </div>

    </div>
    <div class="modal-footer">
      <button class="btn btn-default operation-cancel" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
      <button class="btn btn-default operation-unlink" aria-hidden="true">{% trans "Break link" %}</button>
      <button class="btn btn-primary operation-insert">{% trans "Insert link" %}</button>
    </div>
  </div>
 </div>
</div>

<div id="colorDialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
 <div class="modal-dialog">
  <div class="modal-content">
     <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">{% trans "Color" %}</h3>
    </div>
    <div class="modal-body">
    </div>
    <div class="modal-footer">
      <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
  <!--    <button class="btn btn-primary">{% trans "Set" %}</button> -->
    </div>
  </div>
 </div>
</div>

<div id="footnoteDialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
 <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">{% trans "Footnote" %}</h3>
    </div>
    <div class="modal-body">
        <textarea style="width: 95%" rows="10" class="form-control"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
      <button class="btn btn-default btn-primary operation-insert">{% trans "Insert footnote" %}</button>
    </div>
  </div>
 </div>
</div>

<div id="htmleditDialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
 <div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">{% trans "HTML Edit" %}</h3>
    </div>
    <div class="modal-body" style="height: 500px;">
        <textarea class="form-control"></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-default operation-cancel" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
      <button class="btn btn-default btn-primary operation-set">{% trans "Set" %}</button>
    </div>
  </div>
 </div>
</div>

<!-- Insert Image Modal -->
<div class="modal fade responsive-popup" id="imageManager" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">{% trans "Insert Image" %}</h4>
        </div>
        <div class="modal-body tabbable">
          <div class="modal-left-pane">
            <h4>{% trans "Sources" %}</h4>
              <ul class="nav nav-tabs">
                <li class="active"><a class="medialibrary" href="#medialibrary" data-toggle="tab">{% trans "Media library" %}</a></li>
                {% check_perm 'edit.upload_attachment' %}
                <li><a href="#uploadimage" data-toggle="tab">{% trans "Upload Image" %}</a></li>
                {% endcheck_perm %}
                <!-- <li><a href="#from_web" data-toggle="tab">From Web</a></li> -->
              </ul>
          </div><!-- end modal-left-pane -->
          <div class="modal-right-pane tab-content">
            <div class="tab-pane" id="uploadimage">
              <div class="drag-area">
                  <div class="drag-area-title">
                    {% trans "Drag Your Images Here" %}
                  </div>
                  <div class="drag-area-button">
                   <span class="btn btn-success fileinput-button">
                      <i class="icon-upload"></i> {% trans "or Select them from folder" %}
                        <input class="upload-file" type="file" name="files[]" multiple data-url="../_upload/">
                   </span>
                  </div>
              </div>
              <div class="alert-wrapper hidden">
                <div class="alert alert-warning animated" role="alert">
                  {% trans "Please wait, we are processing your image..." %}
                  <div class="spinner">
                    <div class="rect1"></div>
                    <div class="rect2"></div>
                    <div class="rect3"></div>
                    <div class="rect4"></div>
                    <div class="rect5"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane active" id="medialibrary">
              <div class="image-info-container">
                <div class="image-preview">
                  <img src="">
                </div>
                <div class="image-info">
                </div>
                <div class="edit-metadata">
                  <div class="form-group">
                    <label for="imageTitle">{% trans "Image Title" %}</label>
                    <input type="email" class="form-control image-title"  placeholder="{% trans "Enter Title" %}">
                  </div>
                  <div class="form-group">
                    <label for="imageTitle">{% trans "Image Description" %}</label>
                    <textarea rows="8" class="form-control image-description" placeholder="{% trans "Description" %}"></textarea>
                  </div>
                </div>

                <a class="btn btn-default btn-xs cancel-metadata-btn" href="#">{% trans "Cancel" %}</a>
                <!--
                <a class="btn btn-primary btn-xs save-metadata-btn" href="#">{% trans "Save Metadata" %}</a>
                -->
                <a class="btn btn-default btn-xs metadata-btn" href="#"><i class="icon-pencil"></i> {% trans "Edit caption" %}</a>
                <a class="btn btn-default btn-xs closeinfo" href="#"><i class="icon-chevron-right"></i></a>
              </div>

              <ul class="uploads-grid">
              </ul>
            </div>
            <div class="tab-pane" id="from_web">
              <input type="text" class="form-control" id="webSearch" placeholder="{% trans "Enter image link" %}">
            </div>
          </div><!-- end modal-right-pane -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Cancel" %}</button>
          <button type="button" class="btn btn-primary insert-image">{% trans "Insert" %}</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <script type="text/html" id='templateImageInfo'>
      <ul>
        <li><span>{% trans "File Name" %}:</span> <%= name %></li>
        <li><span>{% trans "Modified" %}:</span> <%= timestamp %></li>
        <li><span>{% trans "File Size" %}:</span> <%= filesize %></li>
        <li><span>{% trans "Dimensions" %}:</span> <%= dimension %></li>
      </ul>
      <h5></h5>
      <p></p>
  </script>
  <script type="text/html" id='templateImageThumbnail'>
     <li data-media-id="<%= media_id %>"><img src="static/<%= name %>" style="max-width: 150px">
         <a class="image-dropdown-button" data-toggle="dropdown"><i class="icon-caret-down"></i></a>
         <ul class="dropdown-menu" style="">
<!--           <li><a href="#"><i class="icon-list-alt"></i> {% trans "Edit metadata" %}</a></li> -->
           <li><a href="static/<%= name %>" target="_blank"><i class="icon-download-alt"></i> {% trans "Download" %}</a></li>
           <li><a href="#" class="delete-attachment"><i class="icon-trash"></i> {% trans "Delete" %}</a></li>
         </ul>
     </li>
  </script>

  <div id="imagePopup" style="position: absolute; background-color: white; margin: 1px; border: 1px solid black; display: none; padding: 4px;">
    <a href="#" class="remove"><i class="icon-remove-sign"></i>  {% trans "REMOVE" %}</a>&nbsp;&nbsp;
    <a href="#" class="bk-image-editor-start"><i class="icon-crop"></i>  {% trans "EDIT" %}</a>
    <a href="#" class="bk-image-editor-stop"><i class="icon-off"></i>  {% trans "STOP EDIT" %}</a>
    <div class="bk-image-editor-ui-controls">
      <hr>
      <div>
        <button bk-image-editor-action="flip_vertical" class="bk-image-editor-action"><i class="icon-resize-vertical"></i></button>&nbsp;&nbsp;
        <button bk-image-editor-action="flip_horizontal" class="bk-image-editor-action"><i class="icon-resize-horizontal"></i></button>&nbsp;&nbsp;
        <button bk-image-editor-action="rotate_left" class="bk-image-editor-action"><i class="icon-rotate-left"></i></button>&nbsp;&nbsp;
        <button bk-image-editor-action="rotate_right" class="bk-image-editor-action"><i class="icon-rotate-right"></i></button>&nbsp;&nbsp;
        <span style="float: right;">
          {% trans "Zoom" %}<input id="bk-image-editor-zoom-slider" type="text" data-slider-min="-100" data-slider-max="100" data-slider-step="1" data-slider-value="0" data-slider-orientation="horizontal" data-slider-selection="after">
        </span>
      </div>
      <div>
        <span style="float: left;">
          <input id="bk-image-editor-contrast-slider" type="text" data-slider-min="0" data-slider-max="200" data-slider-step="5" data-slider-value="0" data-slider-orientation="horizontal" data-slider-selection="after">&nbsp;&nbsp;{% trans "Contrast" %}
        </span>
        <span style="float: right;">
          {% trans "Brightness" %}<input id="bk-image-editor-brightness-slider" type="text" data-slider-min="0" data-slider-max="200" data-slider-step="5" data-slider-value="0" data-slider-orientation="horizontal" data-slider-selection="after">
        </span>
      </div>
      <div>
        <span style="float: left; text-align: left">
          <input id="bk-image-editor-blur-slider" type="text" data-slider-min="0" data-slider-max="300" data-slider-step="10" data-slider-value="0" data-slider-orientation="horizontal" data-slider-selection="after">&nbsp;&nbsp;{% trans "Blur" %}
        </span>
        <span style="float: right;">
          {% trans "Saturate" %}<input id="bk-image-editor-saturate-slider" type="text" data-slider-min="0" data-slider-max="300" data-slider-step="5" data-slider-value="0" data-slider-orientation="horizontal" data-slider-selection="after">
        </span>
      </div>
    </div>
  </div>
<!-- End Insert Image Modal -->

<div class="modal fade" id="saveContentWithCommentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h2 class="modal-title" id="myModalLabel">{% trans "Save with comment" %}</h2>
        </div>
        <div class="modal-body">
          {% csrf_token %}
          <section>
            <label for="description">{% trans "Comment" %}</label>
            <textarea class="form-control" name="comment" cols="40" rows="7"></textarea>
          </section>
        </div>
        <div class="modal-footer">
          <section class='pull-right'>
            <button type="button" data-action="save" class="btn btn-success">{% trans "Save" %}</>
            <button type="button" data-action="close" class="btn btn-default">{% trans "Cancel" %}</>
          </section>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="contentModifiedModal" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">{% trans "Chapter has been modified" %}</h4>
      </div>
      <div class="modal-body">
        <p>{% trans "This chapter has been modified. Do you want to save it before closing?" %}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel btn-default">{% trans "Discard changes" %}</button>
        <button type="button" class="btn btn-save btn-primary">{% trans "Save changes" %}</button>
      </div>
    </div>
  </div>
</div>

<div id="columnsDialog" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3>{% trans "Columns" %}</h3>
        </div>
        <div class="modal-body">
          <form autocomplete="off">

          <div class="control-group">
            <label class="control-label" for="columnsNumber">{% trans "Number of columns" %}</label>
            <div class="controls">
              <input type="text" id="columnsNumber" name="columnsNumber">
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="columnsValign">{% trans "Vertical alignment" %}</label>
            <div class="controls">
              <select name="valign" id="columnsValign">
                <option value="">{% trans "Turn off" %}</option>
                <option value="justify">{% trans "Justify" %}</option>
              </select>
            </div>
          </div>

          <div class="control-group">
            <label class="control-label" for="columnsGap">{% trans "Column gap (in mm)" %}</label>
            <div class="controls">
              <input type="text" id="columnsGap" name="gap">
            </div>
          </div>

          <div class="checkbox">
            <label><input type="checkbox" id="columnsStart" name="start"> {% trans "Column continues after the marker" %}</label>
          </div>

          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default btn-cancel" data-dismiss="modal" aria-hidden="true">{% trans "Close" %}</button>
          <button class="btn btn-primary btn-ok" aria-hidden="true">{% trans "OK" %}</button>
        </div>
      </div>
  </div>
</div>

<div id="splitChapter" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bod-color">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">{% trans "Split Chapter" %}</h3>
      </div>
      <div class="modal-body">
        <input type="hidden" name="chapter_id" value=""/>
        <input type="text" name="chapter" placeholder="{% trans "New chapter title" %}" class="form-control">
        <div class="alert alert-danger" style="margin-top: 15px;" role="alert"></div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-default operation-cancel" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
        <button class="btn btn-primary operation-split">{% trans "Split Chapter" %}</button>
      </div>
    </div>
  </div>
</div>
