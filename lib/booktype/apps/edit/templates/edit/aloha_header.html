{% load staticfiles %}

<link rel="stylesheet" href="{% static "edit/js/aloha/css/aloha.css" %}" type="text/css">
<script src="{% static "edit/js/aloha/lib/vendor/jquery-1.7.2.js" %}"></script>   

<script>
    Aloha = window.Aloha || {};

    Aloha.settings = {
        jQuery: window.jQuery.noConflict(true),
        baseUrl: '{% static "edit/js/aloha/lib/" %}',

        sidebar: { disabled: true },
        predefinedModules: {
            'booktype': window.booktype,
            'jquery19': window.jQuery,
            'jqueryui': window.jQuery.ui,
            'underscore': _
        },
        plugins: {
            format: {
                config: ['removeFormat'],
                removeFormats: ['strong', 'em', 'b', 'i', 's', 'cite', 'q', 'code', 'abbr', 'del', 'sub', 'sup']
            },            
            image: {
                config: ['img'],
                autoResize: false,
                ui: {
                    resizable: false,
                }
            },
            highlighteditables: {
                config: ['highlight'],        
                editables: {
                    '#mirko': [ 'highlight' ],
                    '#contenteditor': [ ] 
                }   
            }
        },
        contentHandler : {
                insertHtml: [ 'word', 'generic', 'oembed', 'sanitize', 'block', 'formatless' ],
                initEditable: [ 'sanitize' ],
                getContents: [ 'blockelement', 'sanitize', 'basic' ],
                sanitize: 'relaxed', // relaxed, restricted, basic,
                allows: {
                    elements: [
                        'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
                        'a', 'br', 'hr',
                        'b', 'i', 'strong', 'em', 'blockquote', 'del', 'ins', 'dfn', 'q', 's', 'small', 'span', 'u',
                        'bdi', 'rt', 'ruby',
                        'abbr', 'address', 'article', 'aside', 'audio', 'caption', 'cite', 'code', 'section',
                        'col', 'colgroup', 'dd', 
                        'div', 'dl', 'dt', 'figure', 'figcaption', 'footer', 'header',
                        'img', 'li', 'mark', 'ol', 'ul', 'p', 'pre', 'style', 'sub', 'sup', 
                        'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'wbr'],
             
                attributes: {
                        'img'       : ['src', 'alt', 'width', 'height', 'align'],
                        'a'         : ['href', 'id', 'class'],
                        'blockquote': ['cite'],
                        'q'         : ['cite'],
                        'p'         : ['id', 'class', 'style'],
                        'div'       : ['id', 'class', 'style'],
                        'span'      : ['id', 'class', 'style'],
                        'sup'       : ['id', 'class'],
                        'hr'        : ['id', 'style'] 
                     },
             
                    protocols: {
                        'a'         : {'href': ['ftp', 'http', 'https', 'mailto', '__relative__']}, // Sanitize.RELATIVE
                        'blockquote': {'cite': ['http', 'https', '__relative__']},
                        'q'         : {'cite': ['http', 'https', '__relative__']}
                    }
                },
                handler: {
                    generic: {
                        transformFormattings: false // this will disable the transformFormattings method in the generic content handler
                    },
                    sanitize: {
                        '.aloha-captioned-image-caption': { elements: [ 'em', 'strong' ] }
                    }
                }
            }
    };

</script>
<script src="{% static "edit/js/aloha/lib/require.js" %}"></script>

<script src="{% static "edit/js/aloha/lib/aloha.js" %}"
    data-aloha-plugins="common/ui,
                        oer/toolbar,
                        common/format,
                        booktype/linkbooktype,
                        booktype/colorbooktype,
                        booktype/footnotes,
                        booktype/horizontalline,
                        booktype/extraformat,
                        booktype/htmledit,
                        common/table,
                        common/list,
                        common/highlighteditables,
                        common/block,
                        common/undo,
                        oer/undobutton,
                        common/image,
                        common/contenthandler,
                        common/paste,
                        common/commands,
                        common/align,
                        booktype/pbreak"></script>
                        
