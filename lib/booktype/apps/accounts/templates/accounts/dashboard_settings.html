{% extends "core/base.html" %}
{% load i18n staticfiles profile reader_tags messaging_tags %}

{% block content %}
    <div class="container">
        <div class="row two-col">
            <div class="col-xs-8">
                <div class="box gray">
                    <h2 class="box-title-alter">{% trans "User settings" %}</h2>
                    <form method="post" action="{% url 'accounts:user_settings' current_user.username %}" enctype="multipart/form-data" name="formsettings">
                        {% csrf_token %}
                        <fieldset class="plain">
                            <ul class="list">
                                <li>
                                    {{ form.email.label_tag }}
                                    {{ form.email }}
                                    {{ form.email.errors }}                                    
                                </li>

                                <li>
                                    {{ form.first_name.label_tag }}
                                    {{ form.first_name }}
                                    {{ form.first_name.errors }}
                                </li>

                                <li>
                                    {{ form.aboutyourself.label_tag }}
                                    {{ form.aboutyourself }}
                                    {{ form.aboutyourself.errors }}
                                </li>

                                <li>
                                    {{ form.profile_pic.label_tag }}
                                    {{ form.profile_pic }}
                                </li>

                                <li>
                                    {{ form.notification.label_tag }}
                                    {{ form.notification }}
                                    {{ form.errors }}
                                </li>
                            </ul>
                            <button class="btn btn-default float-left">{% trans "Save changes" %}</button>
                        </fieldset>
                    </form>
                </div>
            </div>

            <div class="col-xs-4">
                <div class="box white">

                    <h2 class="box-title">{% trans "Change password" %}</h2>

                    <form method="post" action="" enctype="multipart/form-data" name="formpassword">
                        {% csrf_token %}
                        <input type="hidden" name="password_change" value="1" />
                        <fieldset class="plain">
                            <ul class="list">
                                {% with form=password_form %}
                                <li>
                                    {{ form.old_password.label_tag }}
                                    {{ form.old_password }}
                                    {{ form.old_password.errors }}
                                </li>

                                <li>
                                    {{ form.new_password1.label_tag }}
                                    {{ form.new_password1 }}
                                    {{ form.new_password1.errors }}
                                </li>

                                <li>
                                    {{ form.new_password2.label_tag }}
                                    {{ form.new_password2 }}
                                    {{ form.new_password2.errors }}
                                </li>
                                {% endwith %}

                                <small><a href="/accounts/forgot_password/" data-toggle="modal" data-target="#myModal">{% trans "Forgotten your password?" %}</a></small>
                            </ul>
                            <button class="btn btn-default float-left">{% trans "Change password" %}</button>
                        </fieldset>
                    </form>

                    <!-- Modal -->
                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                      <div class="modal-dialog">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h2 class="modal-title" id="myModalLabel">{% trans "Forgot your password" %}</h2>
                          </div>
                          <div class="modal-body">
                            <form method="POST" action="/" id="loginform" name="loginform" onsubmit="return false;">
                            <ul class="list">
                                <li>
                                  <label>{% trans "Username or E-mail Address" %}</label>
                                  <input type="text" name="username" class="form-control" value="">
                                </li>
                              <p>{% trans "Give us your username or e-mail you used to create Booktype account and we will send you new password."%}</p>
                            </ul>
                          </div>

                          <div class="modal-footer">
                            <button type="button" class="btn btn-primary">{% trans "Send request" %}</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Cancel" %}</button>
                            </form>
                          </div>
                        </div><!-- /.modal-content -->
                      </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->

                </div>
            </div>

        </div>
    </div> <!-- End of container -->
{% endblock %}